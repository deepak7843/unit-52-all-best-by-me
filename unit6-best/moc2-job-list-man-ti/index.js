let data = [
  {
    isNew: "true",
    company: "Ellette",
    postedAt: "2021-03-30",
    city: "Gangtok",
    location: "American Samoa",
    countryCode: "WF",
    role: "Frontend",
    level: "Junior",
    contract: "Full Time",
    position: " Backend Developer",
    language: "Java",
  },
  {
    isNew: "false",
    company: "Jinny",
    postedAt: "2021-09-09",
    city: "Ludhiana",
    location: "Belgium",
    countryCode: "MU",
    role: "FullStack",
    level: "Junior",
    contract: "Full Time",
    position: "Junior Frontend Developer",
    language: "Java",
  },
  {
    isNew: "false",
    company: "Gale",
    postedAt: "2021-10-04",
    city: "Port Said",
    location: "Tanzania, United Republic of",
    countryCode: "BH",
    role: "FullStack",
    level: "Senior",
    contract: "Full Time",
    position: " Backend Developer",
    language: "Java",
  },
  {
    isNew: "false",
    company: "Amalie",
    postedAt: "2021-09-02",
    city: "Lomé",
    location: "Fiji",
    countryCode: "SL",
    role: "Frontend",
    level: "Senior",
    contract: "Full Time",
    position: "Junior Frontend Developer",
    language: "Javascript",
  },
  {
    isNew: "true",
    company: "Gertrud",
    postedAt: "2021-03-15",
    city: "Baku",
    location: "Fiji",
    countryCode: "GI",
    role: "Frontend",
    level: "Fresher",
    contract: "Part Time",
    position: "Senior Frontend Developer",
    language: "HTML",
  },
  {
    isNew: "false",
    company: "Jenda",
    postedAt: "2021-03-25",
    city: "Dalian",
    location: "Czech Republic",
    countryCode: "CV",
    role: "FullStack",
    level: "Junior",
    contract: "Full Time",
    position: "Senior Frontend Developer",
    language: "Ruby",
  },
  {
    isNew: "false",
    company: "Aryn",
    postedAt: "2021-08-24",
    city: "Riga",
    location: "Nepal",
    countryCode: "UA",
    role: "Frontend",
    level: "Junior",
    contract: "Part Time",
    position: "Junior Frontend Developer",
    language: "Javascript",
  },
  {
    isNew: "false",
    company: "Wendi",
    postedAt: "2021-11-19",
    city: "Kuala Lumpur",
    location: "Trinidad and Tobago",
    countryCode: "SK",
    role: "FullStack",
    level: "Junior",
    contract: "Part Time",
    position: "Junior Frontend Developer",
    language: "Java",
  },
  {
    isNew: "true",
    company: "Gabriellia",
    postedAt: "2021-11-12",
    city: "Hilo",
    location: "Croatia",
    countryCode: "IL",
    role: "FullStack",
    level: "Fresher",
    contract: "Full Time",
    position: " Backend Developer",
    language: "Java",
  },
  {
    isNew: "true",
    company: "Danika",
    postedAt: "2021-01-14",
    city: "N'Djamena",
    location: "Italy",
    countryCode: "ID",
    role: "FullStack",
    level: "Junior",
    contract: "Part Time",
    position: "Senior Frontend Developer",
    language: "Ruby",
  },
  {
    isNew: "true",
    company: "Valera",
    postedAt: "2021-02-28",
    city: "Rio Branco",
    location: "United Kingdom",
    countryCode: "IL",
    role: "Frontend",
    level: "Senior",
    contract: "Part Time",
    position: "Senior Frontend Developer",
    language: "React",
  },
  {
    isNew: "true",
    company: "Teriann",
    postedAt: "2021-06-07",
    city: "Tampa",
    location: "South Africa",
    countryCode: "LV",
    role: "FullStack",
    level: "Senior",
    contract: "Part Time",
    position: "Junior Frontend Developer",
    language: "Ruby",
  },
  {
    isNew: "false",
    company: "Ardeen",
    postedAt: "2022-01-03",
    city: "Split (city)",
    location: "Holy See (Vatican City State)",
    countryCode: "GU",
    role: "FullStack",
    level: "Fresher",
    contract: "Part Time",
    position: "Software Engineer",
    language: "Ruby",
  },
  {
    isNew: "false",
    company: "Mahalia",
    postedAt: "2021-11-27",
    city: "Ciudad del Este",
    location: "Tunisia",
    countryCode: "ML",
    role: "FullStack",
    level: "Junior",
    contract: "Full Time",
    position: "Software Engineer",
    language: "Java",
  },
  {
    isNew: "true",
    company: "Brietta",
    postedAt: "2021-11-13",
    city: "Ilhéus",
    location: "Northern Mariana Islands",
    countryCode: "CI",
    role: "Frontend",
    level: "Junior",
    contract: "Part Time",
    position: "Junior Frontend Developer",
    language: "Ruby",
  },
  {
    isNew: "true",
    company: "Iseabal",
    postedAt: "2021-11-17",
    city: "Arbil",
    location: "Aruba",
    countryCode: "IE",
    role: "FullStack",
    level: "Junior",
    contract: "Full Time",
    position: "Junior Frontend Developer",
    language: "Java",
  },
  {
    isNew: "false",
    company: "Edyth",
    postedAt: "2021-09-27",
    city: "Minneapolis",
    location: "Norfolk Island",
    countryCode: "BN",
    role: "FullStack",
    level: "Fresher",
    contract: "Part Time",
    position: "Software Engineer",
    language: "Javascript",
  },
  {
    isNew: "false",
    company: "Sharlene",
    postedAt: "2021-09-12",
    city: "Denver",
    location: "Saint Lucia",
    countryCode: "YE",
    role: "Frontend",
    level: "Senior",
    contract: "Part Time",
    position: "Software Engineer",
    language: "Java",
  },
  {
    isNew: "true",
    company: "Yvonne",
    postedAt: "2021-06-09",
    city: "Durban",
    location: "Holy See (Vatican City State)",
    countryCode: "AM",
    role: "FullStack",
    level: "Fresher",
    contract: "Full Time",
    position: "Software Engineer",
    language: "Ruby",
  },
  {
    isNew: "false",
    company: "Luci",
    postedAt: "2021-09-25",
    city: "Chengdu",
    location: "Bahrain",
    countryCode: "SK",
    role: "Frontend",
    level: "Fresher",
    contract: "Part Time",
    position: " Backend Developer",
    language: "HTML",
  },
  {
    isNew: "false",
    company: "Sabina",
    postedAt: "2021-12-30",
    city: "Labasa",
    location: "Ethiopia",
    countryCode: "RW",
    role: "Frontend",
    level: "Fresher",
    contract: "Full Time",
    position: " Backend Developer",
    language: "React",
  },
  {
    isNew: "true",
    company: "Lulita",
    postedAt: "2021-04-01",
    city: "Mumbai",
    location: "Solomon Islands",
    countryCode: "SG",
    role: "FullStack",
    level: "Senior",
    contract: "Part Time",
    position: "Software Engineer",
    language: "HTML",
  },
  {
    isNew: "false",
    company: "Kalina",
    postedAt: "2022-01-11",
    city: "Cebu City",
    location: "Guinea-Bissau",
    countryCode: "IT",
    role: "FullStack",
    level: "Junior",
    contract: "Full Time",
    position: "Junior Frontend Developer",
    language: "Ruby",
  },
  {
    isNew: "false",
    company: "Moyna",
    postedAt: "2021-02-25",
    city: "Kiev",
    location: "Benin",
    countryCode: "RO",
    role: "FullStack",
    level: "Junior",
    contract: "Part Time",
    position: "Senior Frontend Developer",
    language: "HTML",
  },
  {
    isNew: "true",
    company: "Michaelina",
    postedAt: "2021-06-24",
    city: "Wollongong",
    location: "Marshall Islands",
    countryCode: "TK",
    role: "Frontend",
    level: "Fresher",
    contract: "Part Time",
    position: "Software Engineer",
    language: "Javascript",
  },
  {
    isNew: "true",
    company: "Shannah",
    postedAt: "2021-10-27",
    city: "Saint-Pierre",
    location: "Slovenia",
    countryCode: "BI",
    role: "FullStack",
    level: "Fresher",
    contract: "Part Time",
    position: " Backend Developer",
    language: "Javascript",
  },
];

let Page = 1;
let size = 10;

let lastPage = Math.ceil(data.length / size);

let paginate_data = paginate(data, size, Page);
console.log("paginate_data--", paginate_data);
displayData(paginate_data);

document.getElementById("searchButton").addEventListener("click", handleSearch);

function paginate(array, size, Page) {
  return array.slice((Page - 1) * size, Page * size);
}

function filterByRole() {
  var selected = document.getElementById("role").value;
  var newData = data.filter((ele) => ele.role === selected);
  displayData(newData);
}

function handleSearch() {
  let query = document.getElementById("query").value;
  let newData = data.filter(
    (ele) => ele.language.toLowerCase() == query.toLowerCase()
  );
  displayData(newData);
}

function incPage() {
  if (Page < lastPage) {
    Page = Page + 1;
    let nextPageData = paginate(data, size, Page);
    console.log("nextPageData--", nextPageData);
    displayData(nextPageData);
  }
}

function decPage() {
  if (Page > 1) {
    Page = Page - 1;
    let prevPageData = paginate(data, size, Page);
    displayData(prevPageData);
  }
}

function displayData(data) {
  document.getElementById("main").innerHTML = "";
  data.map((ele) => {
    let card = document.createElement("div");
    card.setAttribute("class", "card");

    let imgBox = document.createElement("div");
    imgBox.setAttribute("class", "imgBox");

    let aboutSection = document.createElement("div");
    aboutSection.setAttribute("class", "aboutSection");

    let jobSection = document.createElement("div");
    jobSection.setAttribute("class", "jobSection");

    let img = document.createElement("img");
    img.setAttribute("class", "userImg");
    img.setAttribute(
      "src",
      `https://img.freepik.com/premium-psd/high-angle-male-student-studying-laptop_23-2148300267.jpg?w=2000`
    );

    imgBox.append(img);

    let companyBox = document.createElement("div");
    companyBox.setAttribute("class", "companyBox");
    let company = document.createElement("p");
    company.textContent = ele.company;

    companyBox.append(company);

    let positionBox = document.createElement("div");
    positionBox.setAttribute("class", "positionBox");
    let position = document.createElement("h2");
    position.textContent = ele.position;

    positionBox.append(position);

    let contractBox = document.createElement("div");
    contractBox.setAttribute("class", "contractBox");

    let postedAt = document.createElement("div");
    postedAt.setAttribute("class", "postedAt");
    postedAt.textContent = ele.postedAt;

    let contract = document.createElement("div");
    contract.setAttribute("class", "contract");
    contract.textContent = ele.contract;

    let location = document.createElement("div");
    location.setAttribute("class", "location");
    location.textContent = ele.location;

    contractBox.append(postedAt, contract, location);

    aboutSection.append(companyBox, positionBox, contractBox);

    let roleBox = document.createElement("div");
    roleBox.setAttribute("class", "roleBox");
    roleBox.textContent = ele.role;

    let levelBox = document.createElement("div");
    levelBox.setAttribute("class", "levelBox");
    levelBox.textContent = ele.level;

    let languageBox = document.createElement("div");
    languageBox.setAttribute("class", "languageBox");
    languageBox.textContent = ele.language;

    jobSection.append(roleBox, levelBox, languageBox);

    card.append(imgBox, aboutSection, jobSection);
    document.getElementById("main").append(card);
  });
}
